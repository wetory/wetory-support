(function(b){function f(){var a=b("span.displayed-posts-count"),d=b("span.total-posts-count");if(a){var c=wp_query.posts_per_page*wp_query.current_page;c=c>wp_query.found_posts?wp_query.found_posts:c;a.text(c)}d&&d.text(wp_query.found_posts)}b.fn.serializeAssoc=function(){var a={};b.each(this.serializeArray(),function(d,c){var e=c.name.match(/(.*?)\[(.*?)\]/);null!==e?(d=e[1],e=e[2],a[d]||(a[d]=[]),e.length||(e=a[d].length),a[d][e]?(b.isArray(a[d][e])||(a[d][e]=[]),a[d][e].push(c.value)):a[d][e]=
c.value):a[c.name]?(b.isArray(a[c.name])||(a[c.name]=[]),a[c.name].push(c.value)):a[c.name]=c.value});return a};b(window).load(function(){var a=b("form.wetory-ajax-filter");0!==a.length&&a.hasClass("autoload")&&a.submit()});b(function(){});b('form.wetory-ajax-filter button[type="submit"]').click(function(a){a.preventDefault();b("form.wetory-ajax-filter").submit();return!1});b('form.wetory-ajax-filter button[type="reset"]').click(function(a){this.form.reset();b("form.wetory-ajax-filter").submit();
return!1});b("form.wetory-ajax-filter").submit(function(){var a=b(this),d=a.find(".filter-status"),c=b(".wetory-ajax-post-list"),e=c.attr("data-loadmore-template"),g=b(".wetory-ajax-loadmore");e={action:"wetory_ajax_filter",query:wp_query.query,form:a.serializeAssoc(),template:e};b.ajax({url:parameters.ajaxurl,data:e,dataType:"json",type:"POST",beforeSend:function(b){a.find('button[type="submit"]').addClass("loading")},success:function(a){c.is("table")?c.find("tbody").html(a.html):c.html(a.html);
wp_query.query=a.query;wp_query.posts_per_page=a.posts_per_page;wp_query.current_page=1;wp_query.found_posts=a.found_posts;wp_query.max_num_pages=a.max_num_pages;f();d.show();wp_query.current_page>=wp_query.max_num_pages?g.hide():g.show()},complete:function(b){a.find('button[type="submit"]').removeClass("loading")}});return!1});b(".wetory-ajax-loadmore").click(function(){var a=b(this),d=b(".wetory-ajax-post-list"),c=d.attr("data-loadmore-template");b.ajax({url:parameters.ajaxurl,data:{action:"wetory_ajax_loadmore",
query:wp_query.query,page:wp_query.current_page,template:c},type:"POST",beforeSend:function(b){a.addClass("loading")},success:function(b){b?(d.append(b),wp_query.current_page++,f(),wp_query.current_page>=wp_query.max_num_pages&&a.hide()):a.hide()},complete:function(b){a.removeClass("loading")}});return!1})})(jQuery);