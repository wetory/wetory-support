(function(c){function f(){var a=c("span.displayed-posts-count"),d=c("span.total-posts-count");if(a){var b=wp_query.posts_per_page*wp_query.current_page;b=b>wp_query.found_posts?wp_query.found_posts:b;a.text(b)}d&&d.text(wp_query.found_posts)}c.fn.serializeAssoc=function(){var a={};c.each(this.serializeArray(),function(d,b){var e=b.name.match(/(.*?)\[(.*?)\]/);null!==e?(d=e[1],e=e[2],a[d]||(a[d]=[]),e.length||(e=a[d].length),a[d][e]?(c.isArray(a[d][e])||(a[d][e]=[]),a[d][e].push(b.value)):a[d][e]=
b.value):a[b.name]?(c.isArray(a[b.name])||(a[b.name]=[]),a[b.name].push(b.value)):a[b.name]=b.value});return a};c(window).load(function(){var a=c("form.wetory-ajax-filter");0!==a.length&&a.hasClass("autoload")&&a.submit()});c(function(){});c('form.wetory-ajax-filter button[type="submit"]').click(function(a){a.preventDefault();c("form.wetory-ajax-filter").submit()});c("form.wetory-ajax-filter").submit(function(){var a=c(this),d=a.find(".filter-status"),b=c(".wetory-ajax-post-list"),e=b.attr("data-loadmore-template"),
g=c(".wetory-ajax-loadmore");e={action:"wetory_ajax_filter",query:wp_query.query,form:a.serializeAssoc(),template:e};c.ajax({url:parameters.ajaxurl,data:e,dataType:"json",type:"POST",beforeSend:function(b){a.find('button[type="submit"]').addClass("loading")},success:function(a){b.is("table")?b.find("tbody").html(a.html):b.html(a.html);wp_query.query=a.query;wp_query.posts_per_page=a.posts_per_page;wp_query.current_page=1;wp_query.found_posts=a.found_posts;wp_query.max_num_pages=a.max_num_pages;f();
d.show();wp_query.current_page===wp_query.max_num_pages?g.hide():g.show()},complete:function(b){a.find('button[type="submit"]').removeClass("loading")}});return!1});c(".wetory-ajax-loadmore").click(function(){var a=c(this),d=c(".wetory-ajax-post-list"),b=d.attr("data-loadmore-template");c.ajax({url:parameters.ajaxurl,data:{action:"wetory_ajax_loadmore",query:wp_query.query,page:wp_query.current_page,template:b},type:"POST",beforeSend:function(b){a.addClass("loading")},success:function(b){b?(d.append(b),
wp_query.current_page++,f(),wp_query.current_page===wp_query.max_num_pages&&a.hide()):a.hide()},complete:function(b){a.removeClass("loading")}});return!1})})(jQuery);